<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credit History</title>
  <link rel="stylesheet" href="/css/styles.css">

  <style>
    /* Scoped styles for vx_highlight_rt_section */
    .vx_highlight_rt_section {
      padding: 0;
      margin: 0;
      width: 100%;
      min-height: 100vh;
      background: linear-gradient(135deg, #0a1628 0%, #0f1f3a 100%);
    }

    /* Header Area */
    .vx_header_area {
      padding: 32px 40px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(15, 31, 58, 0.5);
      backdrop-filter: blur(10px);
    }

    .vx_header_content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .vx_header_left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .vx_header_icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: vx_pulse 3s ease-in-out infinite;
    }

    .vx_header_icon svg {
      width: 28px;
      height: 28px;
      color: white;
    }

    .vx_header_text h2 {
      margin: 0;
      font-size: 28px;
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.5px;
    }

    .vx_header_text p {
      margin: 4px 0 0 0;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 400;
    }

    .vx_new_app_btn {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .vx_new_app_btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .vx_new_app_btn svg {
      width: 18px;
      height: 18px;
    }

    /* Stats Area */
    .vx_stats_area {
      padding: 32px 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .vx_stats_grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 24px;
    }

    .vx_stat_card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .vx_stat_card:hover {
      transform: translateY(-4px);
      border-color: rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .vx_stat_card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent-color);
    }

    .vx_stat_card.blue { --accent-color: #3b82f6; }
    .vx_stat_card.green { --accent-color: #10b981; }
    .vx_stat_card.orange { --accent-color: #f59e0b; }
    .vx_stat_card.purple { --accent-color: #8b5cf6; }

    .vx_stat_header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .vx_stat_label {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.6);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .vx_stat_icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      opacity: 0.15;
    }

    .vx_stat_icon svg {
      width: 22px;
      height: 22px;
      color: var(--accent-color);
    }

    .vx_stat_value {
      font-size: 36px;
      font-weight: 700;
      color: #ffffff;
      margin: 0;
      line-height: 1;
    }

    .vx_stat_change {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* Applications Area */
    .vx_applications_area {
      padding: 0 40px 40px 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .vx_app_header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 16px;
    }

    .vx_app_title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 20px;
      font-weight: 600;
      color: #ffffff;
    }

    .vx_app_title svg {
      width: 22px;
      height: 22px;
      color: rgba(255, 255, 255, 0.7);
    }

    .vx_filters {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .vx_filter_select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #ffffff;
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 140px;
    }

    .vx_filter_select:hover {
      border-color: rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.08);
    }

    .vx_filter_select:focus {
      outline: none;
      border-color: #3b82f6;
    }

    .vx_app_content {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 32px;
      min-height: 400px;
      backdrop-filter: blur(10px);
    }

    /* Table Styles */
    .vx_table_container {
      overflow-x: auto;
    }

    .vx_loan_table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }

    .vx_loan_table thead tr {
      background: rgba(255, 255, 255, 0.05);
    }

    .vx_loan_table th {
      padding: 16px;
      text-align: left;
      font-size: 13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.7);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .vx_loan_table th:first-child {
      border-top-left-radius: 8px;
    }

    .vx_loan_table th:last-child {
      border-top-right-radius: 8px;
    }

    .vx_loan_table tbody tr {
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .vx_loan_table tbody tr:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .vx_loan_table td {
      padding: 20px 16px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 14px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .vx_status_badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .vx_status_badge.repaid {
      background: rgba(16, 185, 129, 0.15);
      color: #10b981;
    }

    .vx_status_badge.active {
      background: rgba(59, 130, 246, 0.15);
      color: #3b82f6;
    }

    .vx_status_badge.pending {
      background: rgba(245, 158, 11, 0.15);
      color: #f59e0b;
    }

    .vx_status_indicator {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      animation: vx_blink 2s ease-in-out infinite;
    }

    /* Empty State */
    .vx_empty_state {
      text-align: center;
      padding: 60px 20px;
    }

    .vx_empty_icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 24px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: vx_float 3s ease-in-out infinite;
    }

    .vx_empty_icon svg {
      width: 40px;
      height: 40px;
      color: rgba(255, 255, 255, 0.3);
    }

    .vx_empty_title {
      font-size: 20px;
      font-weight: 600;
      color: #ffffff;
      margin: 0 0 12px 0;
    }

    .vx_empty_text {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.5);
      margin: 0 0 24px 0;
      line-height: 1.6;
    }

    .vx_empty_btn {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      border: none;
      padding: 12px 28px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .vx_empty_btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .vx_empty_btn svg {
      width: 18px;
      height: 18px;
    }

    /* Animations */
    @keyframes vx_pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
      }
    }

    @keyframes vx_float {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    @keyframes vx_blink {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.3;
      }
    }

    @keyframes vx_fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .vx_fade_in {
      animation: vx_fadeInUp 0.5s ease-out forwards;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .vx_header_area,
      .vx_stats_area,
      .vx_applications_area {
        padding-left: 24px;
        padding-right: 24px;
      }

      .vx_stats_grid {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }
    }

    @media (max-width: 768px) {
      .vx_header_content {
        flex-direction: column;
        align-items: flex-start;
      }

      .vx_header_text h2 {
        font-size: 24px;
      }

      .vx_stats_grid {
        grid-template-columns: 1fr;
      }

      .vx_app_header {
        flex-direction: column;
        align-items: flex-start;
      }

      .vx_filters {
        width: 100%;
      }

      .vx_filter_select {
        flex: 1;
        min-width: auto;
      }

      .vx_table_container {
        overflow-x: scroll;
      }

      .vx_loan_table {
        min-width: 600px;
      }
    }

    @media (max-width: 480px) {
      .vx_header_area,
      .vx_stats_area,
      .vx_applications_area {
        padding-left: 16px;
        padding-right: 16px;
      }

      .vx_app_content {
        padding: 20px;
      }

      .vx_stat_value {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <%- include('../partials/user-nav.ejs', { user, page }) %>
    <main class="dashboard-content">
      <div class="vx_highlight_rt_section" id="vx_loan_history_section">

        <!-- Header Area -->
        <div class="vx_header_area">
          <div class="vx_header_content">
            <div class="vx_header_left">
              <div class="vx_header_icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <div class="vx_header_text">
                <h2>Loan History</h2>
                <p>Track and manage all your loan applications and their status</p>
              </div>
            </div>
            <button class="vx_new_app_btn" id="vx_new_app_btn">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              New Application
            </button>
          </div>
        </div>

        <!-- Stats Area -->
        <div class="vx_stats_area">
          <div class="vx_stats_grid">

            <div class="vx_stat_card blue vx_fade_in" style="animation-delay: 0.1s">
              <div class="vx_stat_header">
                <div>
                  <div class="vx_stat_label">Total Applications</div>
                  <h3 class="vx_stat_value" data-target="2">0</h3>
                </div>
                <div class="vx_stat_icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                </div>
              </div>
              <div class="vx_stat_change">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
                All time records
              </div>
            </div>

            <div class="vx_stat_card green vx_fade_in" style="animation-delay: 0.2s">
              <div class="vx_stat_header">
                <div>
                  <div class="vx_stat_label">Approved</div>
                  <h3 class="vx_stat_value" data-target="1">0</h3>
                </div>
                <div class="vx_stat_icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <div class="vx_stat_change">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
                Successfully processed
              </div>
            </div>

            <div class="vx_stat_card orange vx_fade_in" style="animation-delay: 0.3s">
              <div class="vx_stat_header">
                <div>
                  <div class="vx_stat_label">Pending</div>
                  <h3 class="vx_stat_value" data-target="0">0</h3>
                </div>
                <div class="vx_stat_icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <div class="vx_stat_change">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                </svg>
                Awaiting review
              </div>
            </div>

            <div class="vx_stat_card purple vx_fade_in" style="animation-delay: 0.4s">
              <div class="vx_stat_header">
                <div>
                  <div class="vx_stat_label">Total Value</div>
                  <h3 class="vx_stat_value" data-target="3000" data-prefix="$">$0</h3>
                </div>
                <div class="vx_stat_icon">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <div class="vx_stat_change">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
                Combined loan value
              </div>
            </div>

          </div>
        </div>

        <!-- Applications Area -->
        <div class="vx_applications_area">
          <div class="vx_app_header">
            <div class="vx_app_title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
              </svg>
              Loan Applications
            </div>
            <div class="vx_filters">
              <select class="vx_filter_select" id="vx_status_filter">
                <option value="all">All Status</option>
                <option value="active">Active</option>
                <option value="repaid">Repaid</option>
                <option value="pending">Pending</option>
              </select>
              <select class="vx_filter_select" id="vx_time_filter">
                <option value="all">All Time</option>
                <option value="this_month">This Month</option>
                <option value="last_month">Last Month</option>
                <option value="this_year">This Year</option>
              </select>
            </div>
          </div>

          <div class="vx_app_content">
            <div class="vx_table_container" id="vx_table_container">
              <table class="vx_loan_table">
                <thead>
                  <tr>
                    <th>Application Date</th>
                    <th>Amount</th>
                    <th>Term</th>
                    <th>Interest Rate</th>
                    <th>Status</th>
                    <th>Outstanding</th>
                  </tr>
                </thead>
                <tbody id="vx_loan_tbody">
                  <tr class="vx_fade_in">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                          <line x1="16" y1="2" x2="16" y2="6"></line>
                          <line x1="8" y1="2" x2="8" y2="6"></line>
                          <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        2025-12-10
                      </div>
                    </td>
                    <td style="font-weight: 600;">$2,000</td>
                    <td>6 months</td>
                    <td>5.5%</td>
                    <td>
                      <span class="vx_status_badge repaid">
                        <span class="vx_status_indicator"></span>
                        Repaid
                      </span>
                    </td>
                    <td style="color: #10b981; font-weight: 600;">$0</td>
                  </tr>
                  <tr class="vx_fade_in" style="animation-delay: 0.1s">
                    <td>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                          <line x1="16" y1="2" x2="16" y2="6"></line>
                          <line x1="8" y1="2" x2="8" y2="6"></line>
                          <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        2026-01-05
                      </div>
                    </td>
                    <td style="font-weight: 600;">$1,000</td>
                    <td>3 months</td>
                    <td>4.8%</td>
                    <td>
                      <span class="vx_status_badge active">
                        <span class="vx_status_indicator"></span>
                        Active
                      </span>
                    </td>
                    <td style="color: #f59e0b; font-weight: 600;">$1,000</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Empty State (hidden by default) -->
            <div class="vx_empty_state" id="vx_empty_state" style="display: none;">
              <div class="vx_empty_icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h3 class="vx_empty_title">No Loan Applications</h3>
              <p class="vx_empty_text">You haven't submitted any loan applications yet. Start by<br>applying for a loan that fits your needs.</p>
              <button class="vx_empty_btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Apply for Loan
              </button>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    // Counter Animation
    function vx_animateCounter(element) {
      const target = parseInt(element.getAttribute('data-target'));
      const prefix = element.getAttribute('data-prefix') || '';
      const duration = 2000;
      const step = target / (duration / 16);
      let current = 0;

      const timer = setInterval(() => {
        current += step;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }
        element.textContent = prefix + Math.floor(current).toLocaleString();
      }, 16);
    }

    // Initialize counters on page load
    document.addEventListener('DOMContentLoaded', () => {
      const counters = document.querySelectorAll('.vx_stat_value[data-target]');

      // Intersection Observer for scroll-triggered animations
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            vx_animateCounter(entry.target);
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.5 });

      counters.forEach(counter => observer.observe(counter));
    });

    // Filter functionality
    const statusFilter = document.getElementById('vx_status_filter');
    const timeFilter = document.getElementById('vx_time_filter');
    const tableBody = document.getElementById('vx_loan_tbody');
    const emptyState = document.getElementById('vx_empty_state');
    const tableContainer = document.getElementById('vx_table_container');

    function vx_filterTable() {
      const statusValue = statusFilter.value;
      const timeValue = timeFilter.value;
      const rows = tableBody.querySelectorAll('tr');
      let visibleCount = 0;

      rows.forEach(row => {
        const statusBadge = row.querySelector('.vx_status_badge');
        const statusText = statusBadge ? statusBadge.textContent.trim().toLowerCase() : '';

        let showRow = true;

        // Status filter
        if (statusValue !== 'all') {
          showRow = showRow && statusText.includes(statusValue);
        }

        // Time filter (simplified - in production, you'd parse dates)
        // For demo purposes, showing all for 'all' time

        if (showRow) {
          row.style.display = '';
          visibleCount++;
        } else {
          row.style.display = 'none';
        }
      });

      // Show/hide empty state
      if (visibleCount === 0) {
        tableContainer.style.display = 'none';
        emptyState.style.display = 'block';
      } else {
        tableContainer.style.display = 'block';
        emptyState.style.display = 'none';
      }
    }

    statusFilter.addEventListener('change', vx_filterTable);
    timeFilter.addEventListener('change', vx_filterTable);

    // New Application Button
    const newAppBtn = document.getElementById('vx_new_app_btn');
    newAppBtn.addEventListener('click', () => {
      // Add your navigation logic here
      alert('Navigate to loan application form');
      // window.location.href = '/apply-credit';
    });

    // Row click handler
    tableBody.addEventListener('click', (e) => {
      const row = e.target.closest('tr');
      if (row) {
        row.style.transform = 'scale(0.98)';
        setTimeout(() => {
          row.style.transform = 'scale(1)';
        }, 100);
        // Add navigation to loan details
        console.log('View loan details');
      }
    });

    // Hover effect enhancement
    const statCards = document.querySelectorAll('.vx_stat_card');
    statCards.forEach(card => {
      card.addEventListener('mouseenter', () => {
        card.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
      });
    });

    // Initialize lucide icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  </script>
</body>
</html>